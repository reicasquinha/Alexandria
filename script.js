// Galeria
const galleryData = {
    astraeos: [
        { src: 'images/galeria/astraeos/casa ark astraeos.png', title: 'Casa Astraeos Ark - Vista Externa' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.png', title: 'Casa Astraeos Ark - Entrada' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.1.png', title: 'Casa Astraeos Ark - Detalhe' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.2.png', title: 'Casa Astraeos Ark - Área Externa' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.3.png', title: 'Casa Astraeos Ark - Piscina' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.4.png', title: 'Casa Astraeos Ark - Terraço' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.5.png', title: 'Casa Astraeos Ark - Sala de Estar' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.6.png', title: 'Casa Astraeos Ark - Cozinha' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.7.png', title: 'Casa Astraeos Ark - Quarto' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.8.png', title: 'Casa Astraeos Ark - Banheiro' },
        { src: 'images/galeria/astraeos/casa ark astraeos 2.9.png', title: 'Casa Astraeos Ark - Escritório' },
        { src: 'images/galeria/astraeos/casa ark astraeos 3.png', title: 'Casa Astraeos Ark - Vista Lateral' },
        { src: 'images/galeria/astraeos/casa ark astraeos 3.1.png', title: 'Casa Astraeos Ark - Detalhe Interior' },
        { src: 'images/galeria/astraeos/casa ark astraeos 3.2.png', title: 'Casa Astraeos Ark - Sala de Jantar' },
        { src: 'images/galeria/astraeos/casa ark astraeos 3.3.png', title: 'Casa Astraeos Ark - Corredor' },
        { src: 'images/galeria/astraeos/casa ark astraeos 3.4.png', title: 'Casa Astraeos Ark - Escada' },
        { src: 'images/galeria/astraeos/casa ark astraeos 4.png', title: 'Casa Astraeos Ark - Vista Aérea' },
        { src: 'images/galeria/astraeos/casa ark astraeos 5.png', title: 'Casa Astraeos Ark - Panorâmica' }
    ],
    thecenter: [
        { src: 'images/galeria/thecenter/casa ark the center 1.png', title: 'Casa The Center Ark - Vista Principal' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv.png', title: 'Casa The Center Ark - Fachada' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 2.png', title: 'Casa The Center Ark - Entrada' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 3.png', title: 'Casa The Center Ark - Detalhe' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 4.png', title: 'Casa The Center Ark - Lateral' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 5.png', title: 'Casa The Center Ark - Fundos' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 6.png', title: 'Casa The Center Ark - Piscina' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 7.png', title: 'Casa The Center Ark - Sala' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 8.png', title: 'Casa The Center Ark - Cozinha' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 9.png', title: 'Casa The Center Ark - Quarto' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 10.png', title: 'Casa The Center Ark - Banheiro' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 11.png', title: 'Casa The Center Ark - Escritório' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 12.png', title: 'Casa The Center Ark - Terraço' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 13.png', title: 'Casa The Center Ark - Jardim' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 14.png', title: 'Casa The Center Ark - Vista Aérea' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 15.png', title: 'Casa The Center Ark - Panorâmica' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 16.png', title: 'Casa The Center Ark - Interior' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 17.png', title: 'Casa The Center Ark - Detalhe Interior' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 18.png', title: 'Casa The Center Ark - Sala de Jantar' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 19.png', title: 'Casa The Center Ark - Corredor' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 20.png', title: 'Casa The Center Ark - Escada' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 21.png', title: 'Casa The Center Ark - Closet' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 22.png', title: 'Casa The Center Ark - Área de Lazer' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 23.png', title: 'Casa The Center Ark - Garagem' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 24.png', title: 'Casa The Center Ark - Área Gourmet' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 25.png', title: 'Casa The Center Ark - Spa' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 26.png', title: 'Casa The Center Ark - Academia' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 27.png', title: 'Casa The Center Ark - Home Theater' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 28.png', title: 'Casa The Center Ark - Adega' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 29.png', title: 'Casa The Center Ark - Biblioteca' },
        { src: 'images/galeria/thecenter/casa ark the center 1 dnv 30.png', title: 'Casa The Center Ark - Vista Noturna' },
        { src: 'images/galeria/thecenter/casa ark the center 2.png', title: 'Casa The Center Ark - Vista Alternativa' }
    ],
    theisland: [
        { src: 'images/galeria/theisland/ark ascended.jpg', title: 'Casa The Island Ark - Vista Principal' },
        { src: 'images/galeria/theisland/2399830_111.jpg', title: 'Casa The Island Ark - Entrada' },
        { src: 'images/galeria/theisland/2399830_112.jpg', title: 'Casa The Island Ark - Sala de Estar' },
        { src: 'images/galeria/theisland/2399830_113.jpg', title: 'Casa The Island Ark - Escada' },
        { src: 'images/galeria/theisland/2399830_114.jpg', title: 'Casa The Island Ark - Corredor' },
        { src: 'images/galeria/theisland/2399830_117.jpg', title: 'Casa The Island Ark - Quarto' },
        { src: 'images/galeria/theisland/2399830_120.jpg', title: 'Casa The Island Ark - Banheiro' },
        { src: 'images/galeria/theisland/2399830_122.jpg', title: 'Casa The Island Ark - Cozinha' },
        { src: 'images/galeria/theisland/2399830_123.jpg', title: 'Casa The Island Ark - Sala de Jantar' },
        { src: 'images/galeria/theisland/2399830_124.jpg', title: 'Casa The Island Ark - Escritório' },
        { src: 'images/galeria/theisland/2399830_125.jpg', title: 'Casa The Island Ark - Terraço' },
        { src: 'images/galeria/theisland/2399830_126.jpg', title: 'Casa The Island Ark - Piscina' },
        { src: 'images/galeria/theisland/2399830_127.jpg', title: 'Casa The Island Ark - Jardim' },
        { src: 'images/galeria/theisland/2399830_130.jpg', title: 'Casa The Island Ark - Vista Lateral' },
        { src: 'images/galeria/theisland/2399830_131.jpg', title: 'Casa The Island Ark - Vista dos Fundos' },
        { src: 'images/galeria/theisland/2399830_133.jpg', title: 'Casa The Island Ark - Área de Lazer' },
        { src: 'images/galeria/theisland/2399830_134.jpg', title: 'Casa The Island Ark - Deck' },
        { src: 'images/galeria/theisland/2399830_138.jpg', title: 'Casa The Island Ark - Vista Aérea' },
        { src: 'images/galeria/theisland/2399830_144.jpg', title: 'Casa The Island Ark - Panorâmica' }
    ]
};

// Função para renderizar a galeria
function renderGallery(category = 'all') {
    const galleryGrid = document.getElementById('gallery-grid');
    galleryGrid.innerHTML = '';
    
    let images = [];
    
    if (category === 'all') {
        // Combinar todas as categorias
        Object.values(galleryData).forEach(categoryImages => {
            images = images.concat(categoryImages);
        });
    } else {
        // Usar apenas a categoria selecionada
        images = galleryData[category] || [];
    }
    
    // Criar elementos da galeria
    images.forEach((image, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.dataset.index = index;
        
        const img = document.createElement('img');
        img.src = image.src;
        img.alt = image.title;
        img.loading = 'lazy'; // Carregamento preguiçoso para melhor performance
        
        const overlay = document.createElement('div');
        overlay.className = 'gallery-item-overlay';
        overlay.textContent = image.title;
        
        galleryItem.appendChild(img);
        galleryItem.appendChild(overlay);
        galleryGrid.appendChild(galleryItem);
        
        // Adicionar evento de clique
        galleryItem.addEventListener('click', () => {
            openModal(images, index);
        });
    });
}

// Slideshow de fundo com imagens da galeria
const slideshowContainer = document.getElementById('slideshow');
let currentSlide = 0;
let slideshowImages = [];

// Função para coletar imagens da galeria para o slideshow
function collectGalleryImagesForSlideshow() {
    // Coletar algumas imagens de cada coleção
    const selectedImages = [];
    
    // Adicionar 3 imagens de cada coleção
    Object.keys(galleryData).forEach(collection => {
        // Selecionar algumas imagens de cada coleção (evitando pegar todas para não sobrecarregar)
        const collectionImages = galleryData[collection];
        // Pegar a primeira, uma do meio e a última de cada coleção
        if (collectionImages.length > 0) {
            selectedImages.push(collectionImages[0].src);
        }
        if (collectionImages.length > 2) {
            selectedImages.push(collectionImages[Math.floor(collectionImages.length / 2)].src);
        }
        if (collectionImages.length > 1) {
            selectedImages.push(collectionImages[collectionImages.length - 1].src);
        }
    });
    
    return selectedImages;
}

// Função para inicializar o slideshow
function initializeSlideshow() {
    // Limpar o container primeiro
    slideshowContainer.innerHTML = '';
    
    // Coletar imagens da galeria
    slideshowImages = collectGalleryImagesForSlideshow();
    
    // Criar elementos de imagem para o slideshow
    slideshowImages.forEach((src, index) => {
        const img = document.createElement('img');
        img.src = src;
        img.className = index === 0 ? 'active' : '';
        img.style.transition = 'opacity 2.5s cubic-bezier(0.4, 0.0, 0.2, 1)';
        img.alt = 'Imagem de fundo';
        img.loading = 'eager'; // Carregar imagens rapidamente
        slideshowContainer.appendChild(img);
    });
    
    // Resetar o índice do slide atual
    currentSlide = 0;
}

// Função para alternar slides com transição suave
function nextSlide() {
    const slides = slideshowContainer.querySelectorAll('img');
    if (slides.length === 0) return; // Proteção contra erros
    
    // Fade out do slide atual
    slides[currentSlide].style.opacity = 0;
    slides[currentSlide].classList.remove('active');
    
    // Avançar para o próximo slide
    currentSlide = (currentSlide + 1) % slides.length;
    
    // Pequeno atraso antes de mostrar o próximo slide para uma transição mais suave
    // Atraso aumentado para coincidir com a transição de opacidade mais longa
    setTimeout(() => {
        // Aplicar uma posição inicial aleatória para o efeito de movimento
        const randomOffsetX = Math.random() * 10 - 5; // Valor entre -5 e 5
        const randomOffsetY = Math.random() * 10 - 5; // Valor entre -5 e 5
        
        slides[currentSlide].style.transform = `scale(1.05) translate(${randomOffsetX}px, ${randomOffsetY}px)`;
        
        // Pequeno atraso antes de iniciar a transição para criar um efeito mais suave
        setTimeout(() => {
            slides[currentSlide].style.opacity = 1;
            slides[currentSlide].classList.add('active');
            
            // Resetar a transformação para permitir que a animação de zoom funcione corretamente
            setTimeout(() => {
                slides[currentSlide].style.transform = '';
            }, 50);
        }, 100);
    }, 1200);
}

// Modal da galeria
let currentImages = [];
let currentImageIndex = 0;

function openModal(images, index) {
    const modal = document.getElementById('gallery-modal');
    const modalImage = document.getElementById('modal-image');
    
    currentImages = images;
    currentImageIndex = index;
    
    modalImage.src = images[index].src;
    modalImage.alt = images[index].title;
    
    modal.classList.add('active');
}

function closeModal() {
    const modal = document.getElementById('gallery-modal');
    modal.classList.remove('active');
}

function nextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    updateModalImage();
}

function prevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    updateModalImage();
}

function updateModalImage() {
    const modalImage = document.getElementById('modal-image');
    modalImage.src = currentImages[currentImageIndex].src;
    modalImage.alt = currentImages[currentImageIndex].title;
}

// Inicializar tudo quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', () => {
    // Configurar o botão home
    const homeButton = document.getElementById('home-button');
    homeButton.addEventListener('click', function(e) {
        e.preventDefault();
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
    
    // Inicializar a galeria
    renderGallery();
    
    // Configurar as abas da galeria
    document.querySelectorAll('.gallery-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            // Remover classe ativa de todas as abas
            document.querySelectorAll('.gallery-tab').forEach(t => t.classList.remove('active'));
            // Adicionar classe ativa à aba clicada
            tab.classList.add('active');
            // Renderizar galeria com a categoria selecionada
            renderGallery(tab.dataset.category);
        });
    });
    
    // Inicializar o slideshow após um pequeno atraso para garantir que a galeria esteja carregada
    setTimeout(initializeSlideshow, 500);
    
    // Iniciar a alternância automática de slides com um intervalo mais longo
    // para permitir que as transições mais elaboradas sejam apreciadas
    setInterval(nextSlide, 8000);
    
    // Adicionar eventos ao modal
    document.getElementById('modal-close').addEventListener('click', closeModal);
    document.getElementById('modal-next').addEventListener('click', nextImage);
    document.getElementById('modal-prev').addEventListener('click', prevImage);
    
    // Fechar modal ao clicar fora da imagem
    document.getElementById('gallery-modal').addEventListener('click', (e) => {
        if (e.target.id === 'gallery-modal') {
            closeModal();
        }
    });
    
    // Navegação com teclado
    document.addEventListener('keydown', (e) => {
        if (!document.getElementById('gallery-modal').classList.contains('active')) return;
        
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowRight') nextImage();
        if (e.key === 'ArrowLeft') prevImage();
    });
    
    // Navegação suave
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
});
